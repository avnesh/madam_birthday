<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Wishes - Madam</title>
<link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@500;700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
<link rel="stylesheet" href="style.css">
</head>
<body class="min-h-screen font-poppins">
<!-- Moving Background Particles -->
<div class="particles">
  <div class="particle"></div>
  <div class="particle"></div>
  <div class="particle"></div>
  <div class="particle"></div>
  <div class="particle"></div>
  <div class="particle"></div>
  <div class="particle"></div>
  <div class="particle"></div>
  <div class="particle"></div>
  <div class="particle"></div>
  <div class="particle"></div>
  <div class="particle"></div>
  <div class="particle"></div>
  <div class="particle"></div>
  <div class="particle"></div>
</div>
  <nav class="p-4 container mx-auto flex justify-between items-center relative">
    <!-- Hamburger Button (Mobile Only) -->
    <button id="hamburger-btn" class="md:hidden z-50">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
    </button>

    <!-- Navigation Links (Mobile Menu & Desktop) -->
    <div class="hidden md:flex md:items-center md:space-x-4"><a href="memories.html">Memories</a><a href="funzone.html">Fun Zone</a><a href="surprise.html">Surprise</a><a href="video.html">Video</a></div>
    <a href="index.html" class="text-sm font-bold z-20">Home</a>
  </nav>

  <!-- Mobile Menu - MOVED HERE -->
  <div id="nav-links" class="hidden mobile-nav"><a href="memories.html">Memories</a><a href="funzone.html">Fun Zone</a><a href="surprise.html">Surprise</a><a href="video.html">Video</a></div>

<main class="container mx-auto p-6 text-center">
Â  <h2 class="script-heading text-5xl mb-8">Dear Madam,</h2>
Â  <div class="mt-6 max-w-3xl mx-auto rounded-xl shadow-lg p-6 fade-in-up typed-message-container">
Â  Â  <div id="typed" class="text-xl leading-relaxed"></div>
Â  </div>
Â  
Â  <h3 class="script-heading text-3xl mt-16">Choose Your Melody ğŸ¶</h3>
Â  <div class="mt-6 max-w-lg mx-auto p-6 rounded-xl shadow-lg typed-message-container playlist-container">
Â  Â  Â  <div class="playlist-scroll">
Â  Â  Â  Â  <div id="playlistList" class="space-y-2"></div>
Â  Â  Â  </div>
Â  </div>

  <div class="mt-16" style="position: relative; z-index: 100;">
    <a id="nextPageBtn" href="funzone.html" class="btn-primary">Next Page: Fun Zone</a>
  </div>
</main>

<footer class="fixed bottom-6 left-1/2 transform -translate-x-1/2 music-player-footer" style="z-index: 1000;">
Â  <div id="player" class="player">
Â  Â  <button id="prevTrack" aria-label="Previous" class="btn-secondary">â®</button>
Â  Â  <button id="playToggle" aria-label="Play/Pause" class="btn-primary">â–¶</button>
Â  Â  <button id="nextTrack" aria-label="Next" class="btn-secondary">â­</button>
Â  Â  <span id="trackName">Loading...</span>
Â  </div>
</footer>

<audio id="bgAudio"></audio>

<script src="script.js"></script>
<script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.12"></script>
<script>
// Typed.js initialization
const typed = new Typed('#typed', {
Â  strings: [
Â  Â  "Your guidance lights our path, and your smile brightens our days.",
Â  Â  "May your birthday be as graceful and lovely as you are.",
Â  Â  "Wishing you laughter, love, and a year of beautiful memories."
Â  ],
Â  typeSpeed: 35,
Â  backSpeed: 10,
Â  backDelay: 2000,
Â  loop: true,
Â  showCursor: true,
Â  cursorChar: '|'
});

// Music Player with hardcoded playlist
const musicPlayer = {
Â  // CORRECTED PLAYLIST with actual file names
Â  playlist: [
Â  Â  { title: "Tum Ho Toh (Original)", file: "birthday.mp3" },
Â  Â  { title: "Humsafar Saiyaara", file: "Humsafar Saiyaara 128 Kbps.mp3" },
Â  Â  { title: "Title Track Saiyaara", file: "Title Track Saiyaara 128 Kbps.mp3" }
Â  ],
Â  currentIndex: 0,
Â  audio: document.getElementById('bgAudio'),
Â  trackName: document.getElementById('trackName'),
Â  playBtn: document.getElementById('playToggle'),
Â  prevBtn: document.getElementById('prevTrack'),
Â  nextBtn: document.getElementById('nextTrack'),
Â  playlistList: document.getElementById('playlistList'),

  loadTrack(index, autoPlay = true) {
    if(index < 0 || index >= this.playlist.length) return;
    this.currentIndex = index;
    const item = this.playlist[this.currentIndex];
    
    this.audio.src = 'assets/music/' + item.file;
    
    if(autoPlay) {
      // Add a small delay to ensure audio is loaded
      setTimeout(() => {
        this.audio.play().catch(() => {
          console.log('Autoplay prevented - user interaction required');
          this.playBtn.innerHTML = 'â–¶';
        });
      }, 100);
    }
    
    this.trackName.textContent = item.title;
    this.updatePlaylistUI();
  },

Â  play() { 
Â  Â  this.audio.play().catch(() => console.log('Play prevented'));
Â  Â  this.playBtn.innerHTML = 'â¸';
Â  },

Â  pause() { 
Â  Â  this.audio.pause();
Â  Â  this.playBtn.innerHTML = 'â–¶';
Â  },

Â  updatePlaylistUI() {
Â  Â  const isPlaying = !this.audio.paused;
Â  Â  
Â  Â  this.playlistList.innerHTML = '';
Â  Â  this.playlist.forEach((item, index) => {
Â  Â  Â  const div = document.createElement('div');
Â  Â  Â  const isActive = index === this.currentIndex;
Â  Â  Â  
Â  Â  Â  let classList = 'playlist-item';
Â  Â  Â  if(isActive) classList += ' active';

Â  Â  Â  div.className = classList;
Â  Â  Â  
Â  Â  Â  let icon = (isActive && isPlaying) ? 'ğŸµ' : 'ğŸ¶';
Â  Â  Â  
Â  Â  Â  div.innerHTML = `<span class="play-icon">${icon}</span>${item.title}`;
Â  Â  Â  
Â  Â  Â  div.onclick = () => {
Â  Â  Â  Â  if(index === this.currentIndex) {
Â  Â  Â  Â  Â  this.audio.paused ? this.play() : this.pause();
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  this.loadTrack(index);
Â  Â  Â  Â  }
Â  Â  Â  };
Â  Â  Â  this.playlistList.appendChild(div);
Â  Â  });
Â  },

Â  bindEvents() {
Â  Â  this.playBtn.addEventListener('click', () => { 
Â  Â  Â  this.audio.paused ? this.play() : this.pause();
Â  Â  });
Â  Â  
Â  Â  this.prevBtn.addEventListener('click', () => {
Â  Â  Â  this.loadTrack((this.currentIndex - 1 + this.playlist.length) % this.playlist.length);
Â  Â  });
Â  Â  
Â  Â  this.nextBtn.addEventListener('click', () => {
Â  Â  Â  this.loadTrack((this.currentIndex + 1) % this.playlist.length);
Â  Â  });

Â  Â  this.audio.addEventListener('ended', () => {
Â  Â  Â  this.loadTrack((this.currentIndex + 1) % this.playlist.length);
Â  Â  });

Â  Â  this.audio.addEventListener('play', () => {
Â  Â  Â  this.playBtn.innerHTML = 'â¸';
Â  Â  Â  this.updatePlaylistUI();
Â  Â  });
Â  Â  
Â  Â  this.audio.addEventListener('pause', () => {
Â  Â  Â  this.playBtn.innerHTML = 'â–¶';
Â  Â  Â  this.updatePlaylistUI();
Â  Â  });
  },
Â  
  init() {
    this.loadTrack(0, true); // FIX: Attempt to autoplay the first track on page load.
    this.bindEvents();
  }
};

function stopMusicAndNavigate(nextUrl) {
  if(typeof musicPlayer !== 'undefined' && musicPlayer.audio) {
    musicPlayer.audio.pause();
    musicPlayer.audio.currentTime = 0;
  }
  location.href = nextUrl;
}

document.addEventListener('DOMContentLoaded', () => {
  musicPlayer.init();

  // BUG FIX: Use addEventListener for robust navigation
  document.getElementById('nextPageBtn').addEventListener('click', function(event) {
    event.preventDefault(); // Prevent the link from navigating immediately
    stopMusicAndNavigate(this.href);
  });
});
</script>
</body>
</html>